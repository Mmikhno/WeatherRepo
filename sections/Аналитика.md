[[_TOC_]]

Полезные ссылки:

- [Материалы для программной документации](%D0%A3%D0%BC%D0%BD%D1%8B%D0%B9%20%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C/%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D1%82%D0%B8%D0%BA%D0%B0/%D0%9C%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D0%B0%D0%BB%D1%8B%20%D0%B4%D0%BB%D1%8F%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%BD%D0%BE%D0%B9%20%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D0%B8)
- [Общее по мобильным приложениям](%D0%A3%D0%BC%D0%BD%D1%8B%D0%B9%20%D0%B2%D0%BE%D0%B4%D0%B8%D1%82%D0%B5%D0%BB%D1%8C/%D0%90%D0%BD%D0%B0%D0%BB%D0%B8%D1%82%D0%B8%D0%BA%D0%B0/%D0%9C%D0%BE%D0%B1%D0%B8%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5%20%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F)
- [Схемы взаимодействия сервисов](https://app.diagrams.net/#G1f0WMBi1Ttho_mNFc1oQB3xuFxm\_-8U1k)

## \[DRAFT\] Модель ТС

<table>
<tr>
<th>Сущность</th>
<th>Поле</th>
<th>Тип</th>
<th>Обязательность</th>
<th>Источник</th>
<th>Комментарий</th>
</tr>
<tr>
<td>ТС</td>
<td>UUID</td>
<td>UUID</td>
<td>да</td>
<td>backend</td>
<td>Идентификатор ТС, скрыто от пользователя. UUID присваивается при первом сохранении на беке. Далее этот UUID должен передаваться в каждом CAM-сообщении в поле StationID</td>
</tr>
<tr>
<td>ТС</td>
<td>Наименование</td>
<td>строка</td>
<td>да</td>
<td>пользователь</td>
<td>

</td>
</tr>
<tr>
<td>ТС</td>
<td>VIN номер</td>
<td>строка</td>
<td>нет</td>
<td>CAN-шина/пользователь при отсутствии адаптера OBD2</td>
<td>При вводе vin автоматически пытаемся определить тип тс, марку, год выпуска</td>
</tr>
<tr>
<td>ТС</td>
<td>Тип ТС</td>
<td>enum</td>
<td>да</td>
<td>пользователь</td>
<td>

Пользователю на текущий момент поле не доступно для просмотра/редактирования

**Значения из списка:** \
PEDESTRIAN - Пешеход \
CYCLIST - Велосипед \
MOPED - Мопед \
MOTOCYCLE - Мотоцикл \
PASSENGER_CAR - Автомобиль \
BUS - Автобус \
LIGHT_TRUCK - Малотоннажный грузовик \
HEAVY_TRUCK - Тяжелый грузовик \
TRAILER - Прицеп \
**Значение по умолчанию** - PASSENGER_CAR
</td>
</tr>
<tr>
<td>ТС</td>
<td>Марка</td>
<td>строка</td>
<td>нет</td>
<td>пользователь/определение по VIN</td>
<td>Если введен vin, стараемся определить по нему, если нет, даем выбор из справочника, если в справочнике нет - даем ввести вручную</td>
</tr>
<tr>
<td>ТС</td>
<td>Модель</td>
<td>строка</td>
<td>нет</td>
<td>пользователь/определение по VIN</td>
<td>Если введен vin, стараемся определить по нему, если нет, даем выбор из справочника, если в справочнике нет - даем ввести вручную</td>
</tr>
<tr>
<td>ТС</td>
<td>Год выпуска</td>
<td>дата</td>
<td>нет</td>
<td>пользователь/определение по VIN</td>
<td>Если введен vin, стараемся определить по нему, если нет, даем выбор из справочника, если в справочнике нет - даем ввести вручную</td>
</tr>
<tr>
<td>ТС</td>
<td>Номер СТС</td>
<td>строка</td>
<td>нет</td>
<td>пользователь</td>
<td>

Номер свидетельства о регистрации - серия и номер, разделенные пробелом. _Ввод по маске:_ серия - первые 4 знака, попарно разделенные пробелом: 2 цифры и 2 буквы русского алфавита (вместо букв могут быть цифры). Номер отделен от серии пробелом, и содержит 6 цифр. \[0-9\]{2}\\s\[А-Я0-9\]{2}\\s\[0-9\]{6}
</td>
</tr>
<tr>
<td>ТС</td>
<td>Регистрационный номер ТС</td>
<td>строка</td>
<td>нет</td>
<td>пользователь</td>
<td>

</td>
</tr>
<tr>
<td>ТС</td>
<td>Вид топлива</td>
<td>строка</td>
<td>нет</td>
<td>пользователь</td>
<td>Бензин/дизель/газ/электричество/другое</td>
</tr>
<tr>
<td>ТС</td>
<td>Марка топлива</td>
<td>справочник</td>
<td>нет</td>
<td>пользователь</td>
<td>Зависит от вида: бензин - АИ-92, АИ-95, АИ-98 ;для дизельного: ДТ. Для видов топлива - электричество/газ - без вариантов выбора. Возможность ручного ввода при отсутствии значения в справочнике</td>
</tr>
<tr>
<td>ТС</td>
<td>Тип разъема (для электромобиля)</td>
<td>enum</td>
<td>нет</td>
<td>пользователь</td>
<td>

**Значения из списка:**<br>

Type 1 \
Type 2 \
GB/t AC \
GB/t DC \
С CSS COMBO 1 \
CSS COMBO 2 \
CHAdeMO

</td>
</tr>

<tr>
<td>ТС</td>
<td>Признак спецтранспорта</td>
<td>булево</td>
<td>да</td>
<td>

</td>
<td>По умолчанию false, пользователь менять не может</td>
</tr>
<tr>
<td>ТС</td>
<td>Пробег (км)</td>
<td>число</td>
<td>

</td>
<td>CAN-шина/GNSS</td>
<td>Уточнить, как хранить: в идеале юзер должен ввести текущий, а потом по данным GPS/CAN мы должны обновлять</td>
</tr>
<tr>
<td>Данные страховки</td>
<td>UUID</td>
<td>UUID</td>
<td>да</td>
<td>backend</td>
<td>id записи</td>
</tr>
<tr>
<td>Данные страховки</td>
<td>UUID ТС</td>
<td>UUID</td>
<td>да</td>
<td>берется текущее выбранное ТС</td>
<td>

</td>
</tr>
<tr>
<td>Данные страховки</td>
<td>Вид страховки</td>
<td>справочник</td>
<td>да</td>
<td>пользователь</td>
<td>Каско/осаго</td>
</tr>
<tr>
<td>Данные страховки</td>
<td>Серия документа</td>
<td>строка</td>
<td>да</td>
<td>пользователь</td>
<td>

</td>
</tr>
<tr>
<td>Данные страховки</td>
<td>Номер документа</td>
<td>строка</td>
<td>да</td>
<td>пользователь</td>
<td>

</td>
</tr>
<tr>
<td>Данные страховки</td>
<td>Дата конца страховки</td>
<td>дата</td>
<td>да</td>
<td>пользователь</td>
<td>

</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>UUID</td>
<td>UUID</td>
<td>да</td>
<td>backend</td>
<td>

</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>UUID ТС</td>
<td>UUID</td>
<td>да</td>
<td>берется текущее выбранное ТС</td>
<td>

</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Вид сервиса</td>
<td>строка</td>
<td>да</td>
<td>пользователь</td>
<td>

Полное ТО; сезонное ТО; замена моторного масла; замена масляного фильтра; замена топливного фильтра; диагностика ходовой части; диагностика тормозной системы; проверка наружного освещения; проверка аккумулятора; шиномонтаж; **прочее**<br>Возможность добавлять свои виды при выборе вида **прочее**.
</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Критерий обслуживания</td>
<td>справочник</td>
<td>да</td>
<td>пользователь</td>
<td>По пробегу, по времени, по моточасам, по расписанию (в определенные даты)</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Последнее событие, дата</td>
<td>дата</td>
<td>нет</td>
<td>пользователь</td>
<td>

Дата последнего события - база для расчета следующего уведомления при выборе критерия обслуживания - _по времени_ (в этом случае - поле обязательно для заполнения)
</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Последнее событие, км</td>
<td>число</td>
<td>нет</td>
<td>пользователь</td>
<td>Значение пробега при последнем событии - база для расчета следующего уведомления при выборе критерия обслуживания - по пробегу (в этом случае - поле обязательно для заполнения)</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>min уровень топлива/заряда</td>
<td>число</td>
<td>да</td>
<td>пользователь</td>
<td>Показатель топлива/заряда , при котором водитель получает уведомление о необходимости посещения заправки</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Дата напоминания</td>
<td>дата</td>
<td>да</td>
<td>пользователь</td>
<td>Дата следующего напоминания. При выборе критерия обслуживания - по расписанию</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Циклическое</td>
<td>булево</td>
<td>нет</td>
<td>пользователь</td>
<td>Признак, что напоминание повторяется многократно</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Период повтора</td>
<td>число</td>
<td>да</td>
<td>пользователь</td>
<td>Периодичность повтора (для повторяющихся напоминания)</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Единица измерения</td>
<td>справочник</td>
<td>нет</td>
<td>пользователь</td>
<td>

День/неделя/месяц/год. _По умолчанию_ - месяц.
</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Срок расчетный</td>
<td>дата</td>
<td>

</td>
<td>рассчитывается</td>
<td>Расчетная дата напоминания</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Повтор по пробегу</td>
<td>число</td>
<td>да</td>
<td>пользователь</td>
<td>

</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Пробег расчетный</td>
<td>число</td>
<td>

</td>
<td>рассчитывается</td>
<td>Расчетный пробег напоминания</td>
</tr>
<tr>
<td>Данные ТО</td>
<td>Комментарий</td>
<td>строка</td>
<td>нет</td>
<td>пользователь</td>
<td>Комментарий в напоминании</td>
</tr>
<tr>
<td>Ошибка</td>
<td>UUID</td>
<td>UUID</td>
<td>да</td>
<td>генерируется приложением</td>
<td>

</td>
</tr>
<tr>
<td>Ошибка</td>
<td>UUID ТС</td>
<td>UUID</td>
<td>да</td>
<td>берется текущее выбранное ТС</td>
<td>

</td>
</tr>
<tr>
<td>Ошибка</td>
<td>Код ошибки</td>
<td>строка</td>
<td>да</td>
<td>CAN-шина</td>
<td>

</td>
</tr>
<tr>
<td>Ошибка</td>
<td>Описание</td>
<td>строка</td>
<td>да</td>
<td>

</td>
<td>

</td>
</tr>
<tr>
<td>Ошибка</td>
<td>Дата и время получения ошибки</td>
<td>datetime</td>
<td>да</td>
<td>

</td>
<td>

</td>
</tr>
</table>

